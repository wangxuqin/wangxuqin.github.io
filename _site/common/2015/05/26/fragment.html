<!DOCTYPE html>
<html lang="zh">
  <head>

  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>常用代码片段 | KimWang's blog</title>
<meta name="description" content="KimWang's blog">

<meta itemprop="name" content="">
<meta itemprop="description" content="KimWang's blog">
<meta itemprop="image" content="">

<meta property="og:url" content="http://localhost:4000/common/2015/05/26/fragment.html">
<meta property="og:type" content="website">
<meta property="og:title" content="常用代码片段 | KimWang's blog">
<meta property="og:site_name" content="KimWang's blog">
<meta property="og:description" content="KimWang's blog">
<meta property="og:image" content="">

<meta name="twitter:url" content="http://localhost:4000/common/2015/05/26/fragment.html">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="常用代码片段 | KimWang's blog">
<meta name="twitter:site" content="KimWang's blog">
<meta name="twitter:description" content="KimWang's blog">

<meta property="twitter:image" content="">

<link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico">

<!--
<link rel="stylesheet" href="/assets/css/app.min.css">
<link rel="alternate" type="application/rss+xml" title="KimWang's blog" href="/feed.xml">
<link rel="canonical" href="/common/2015/05/26/fragment.html">
-->

<link rel="stylesheet" href="/assets/dist/style.css">
<link rel="stylesheet" href="/assets/dist/highlight.css">
<link rel="stylesheet" href="/assets/dist/search.css">
<link rel="stylesheet" href="/assets/dist/fontsettings.css">
<link rel="stylesheet" href="/assets/dist/tool.css">




</head>

  <body>
    <div class="book without-animation with-summary font-size-2 font-family-1">
    <input type='checkbox' id='sidemenu' checked="true">
<aside>
<h3>KimWang's blog</h3>
<ul id="sideul">
    <li><a            href="http://localhost:4000/">主页</a></li>
    <li><a class="active" href="http://localhost:4000/posts.html">文章</a></li>
    <li><a href="#">工具</a></li>
    <li><a href="#">关于</a></li>
</ul> 
</aside>   

<div class="book-summary">
  <div id="book-search-input" role="search">
    <input type="text" placeholder="search">
  </div>
  <nav role="navigation">
  <ul class="summary">
    
    
    <h2>&nbsp;&nbsp;android</h2>
    
      <li ><a href="/android/2015/04/15/basic-width-android.html">&nbsp;&nbsp;&nbsp;&nbsp;1.android基础知识</a></li>
    
      <li ><a href="/android/2015/04/13/problem-width-android-orientation.html">&nbsp;&nbsp;&nbsp;&nbsp;2.android横竖屏切换时的一些问题</a></li>
    
  
    <li class="divider"></li>
    <h2>&nbsp;&nbsp;Common</h2>
    
      <li ><a href="/common/2015/04/30/linux_system_signal.html">&nbsp;&nbsp;&nbsp;&nbsp;1.Linux信号signal处理机制（转）</a></li>
    
      <li ><a href="/common/2015/04/29/timelinefx.html">&nbsp;&nbsp;&nbsp;&nbsp;2.Timelinefx粒子编辑器</a></li>
    
      <li ><a href="/common/2015/04/20/common-cmd.html">&nbsp;&nbsp;&nbsp;&nbsp;3.C/C++常用命令</a></li>
    
      <li ><a href="/common/2015/04/20/dll-and-so-compare.html">&nbsp;&nbsp;&nbsp;&nbsp;4.Window动态库与Linux共享对象比较（转）</a></li>
    
  
    <li class="divider"></li>
    <h2>&nbsp;&nbsp;Android</h2>
    
      <li ><a href="/android/2015/05/04/question-width-android.html">&nbsp;&nbsp;&nbsp;&nbsp;1.android开发问题集</a></li>
    
  
    <li class="divider"></li>
    <h2>&nbsp;&nbsp;AS3</h2>
    
      <li ><a href="/as3/2015/05/08/filereference.html">&nbsp;&nbsp;&nbsp;&nbsp;1.使用 FileReference 类（转）</a></li>
    
  
    <li class="divider"></li>
    <h2>&nbsp;&nbsp;common</h2>
    
      <li ><a href="/common/2015/06/05/opengl-glsurfaceview.html">&nbsp;&nbsp;&nbsp;&nbsp;1.GLSurfaceView相关（转）</a></li>
    
      <li ><a href="/common/2015/06/03/color-calculator.html">&nbsp;&nbsp;&nbsp;&nbsp;2.常用色彩模型转换算法</a></li>
    
      <li class="active"><a href="/common/2015/05/26/fragment.html">&nbsp;&nbsp;&nbsp;&nbsp;3.常用代码片段</a></li>
    
  
  </ul>
</nav>
</div>

<div id='wrap'>
    <label id='sideMenuControl' for='sidemenu'>≡</label>
</div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <div style="display: none">TODO: share icons</div>
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i>
            <a>常用代码片段</a>
          </h1>
        </div>
        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">
            <div id="book-search-results">
              <div class="search-noresults">
                <section class="normal markdown-section">
                  <p><strong>1.打印lua表</strong></p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="nf">print_r</span> <span class="p">(</span> <span class="n">t</span> <span class="p">)</span>  
	<span class="kd">local</span> <span class="n">print_r_cache</span><span class="o">=</span><span class="p">{}</span>
	<span class="kd">local</span> <span class="k">function</span> <span class="nf">sub_print_r</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">indent</span><span class="p">)</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">print_r_cache</span><span class="p">[</span><span class="nb">tostring</span><span class="p">(</span><span class="n">t</span><span class="p">)])</span> <span class="k">then</span>
			<span class="n">print_string</span><span class="p">(</span><span class="n">indent</span><span class="o">..</span><span class="s2">"*"</span><span class="o">..</span><span class="nb">tostring</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
		<span class="k">else</span>
			<span class="n">print_r_cache</span><span class="p">[</span><span class="nb">tostring</span><span class="p">(</span><span class="n">t</span><span class="p">)]</span><span class="o">=</span><span class="kc">true</span>
			<span class="k">if</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="o">==</span><span class="s2">"table"</span><span class="p">)</span> <span class="k">then</span>
				<span class="k">for</span> <span class="n">pos</span><span class="p">,</span><span class="n">val</span> <span class="k">in</span> <span class="nb">pairs</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="k">do</span>
					<span class="k">if</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">val</span><span class="p">)</span><span class="o">==</span><span class="s2">"table"</span><span class="p">)</span> <span class="k">then</span>
						<span class="n">print_string</span><span class="p">(</span><span class="n">indent</span><span class="o">..</span><span class="s2">"["</span><span class="o">..</span><span class="n">pos</span><span class="o">..</span><span class="s2">"] =&gt; "</span><span class="o">..</span><span class="nb">tostring</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="o">..</span><span class="s2">" {"</span><span class="p">)</span>
						<span class="n">sub_print_r</span><span class="p">(</span><span class="n">val</span><span class="p">,</span><span class="n">indent</span><span class="o">..</span><span class="nb">string.rep</span><span class="p">(</span><span class="s2">" "</span><span class="p">,</span><span class="nb">string.len</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span><span class="o">+</span><span class="mi">8</span><span class="p">))</span>
						<span class="n">print_string</span><span class="p">(</span><span class="n">indent</span><span class="o">..</span><span class="nb">string.rep</span><span class="p">(</span><span class="s2">" "</span><span class="p">,</span><span class="nb">string.len</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span><span class="o">+</span><span class="mi">6</span><span class="p">)</span><span class="o">..</span><span class="s2">"}"</span><span class="p">)</span>
					<span class="k">elseif</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">val</span><span class="p">)</span><span class="o">==</span><span class="s2">"string"</span><span class="p">)</span> <span class="k">then</span>
						<span class="n">print_string</span><span class="p">(</span><span class="n">indent</span><span class="o">..</span><span class="s2">"["</span><span class="o">..</span><span class="n">pos</span><span class="o">..</span><span class="s1">'] =&gt; "'</span><span class="o">..</span><span class="nb">tostring</span><span class="p">(</span><span class="n">val</span><span class="p">)</span><span class="o">..</span><span class="s1">'"'</span><span class="p">)</span>
					<span class="k">else</span>
						<span class="n">print_string</span><span class="p">(</span><span class="n">indent</span><span class="o">..</span><span class="s2">"["</span><span class="o">..</span><span class="n">pos</span><span class="o">..</span><span class="s2">"] =&gt; "</span><span class="o">..</span><span class="nb">tostring</span><span class="p">(</span><span class="n">val</span><span class="p">))</span>
					<span class="k">end</span>
				<span class="k">end</span>
			<span class="k">else</span>
				<span class="n">print_string</span><span class="p">(</span><span class="n">indent</span><span class="o">..</span><span class="nb">tostring</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
			<span class="k">end</span>
		<span class="k">end</span>
	<span class="k">end</span>
	<span class="k">if</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="o">==</span><span class="s2">"table"</span><span class="p">)</span> <span class="k">then</span>
		<span class="n">print_string</span><span class="p">(</span><span class="nb">tostring</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="o">..</span><span class="s2">" {"</span><span class="p">)</span>
		<span class="n">sub_print_r</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="s2">"  "</span><span class="p">)</span>
		<span class="n">print_string</span><span class="p">(</span><span class="s2">"}"</span><span class="p">)</span>
	<span class="k">else</span>
		<span class="n">sub_print_r</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="s2">"  "</span><span class="p">)</span>
	<span class="k">end</span>
	<span class="n">print_string</span><span class="p">(</span><span class="s2">""</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div>

<p><strong>2.序列化lua表</strong></p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">--region serializer.lua</span>
<span class="c1">--Author : KimWang</span>
<span class="c1">--Date   : 2015/5/27</span>
<span class="c1">--这个文件用于lua表的序列化和反序列化，并且提供相关的方法持久化已经序列化的数据。</span>
<span class="n">Serializer</span> <span class="o">=</span> <span class="p">{};</span>

<span class="c1">--[Comment]</span>
<span class="c1">--序列化lua表</span>
<span class="c1">--obj:  需要被序列化的对象</span>
<span class="c1">--返回: 序列化后的字符串</span>
<span class="n">Serializer</span><span class="p">.</span><span class="n">serialize</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>  
    <span class="kd">local</span> <span class="n">str</span> <span class="o">=</span> <span class="s2">""</span> 
    <span class="kd">local</span> <span class="n">t</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>  
    <span class="k">if</span> <span class="n">t</span> <span class="o">==</span> <span class="s2">"number"</span> <span class="k">then</span>  
        <span class="n">str</span> <span class="o">=</span> <span class="n">str</span> <span class="o">..</span> <span class="n">obj</span>  
    <span class="k">elseif</span> <span class="n">t</span> <span class="o">==</span> <span class="s2">"boolean"</span> <span class="k">then</span>  
        <span class="n">str</span> <span class="o">=</span> <span class="n">str</span> <span class="o">..</span> <span class="nb">tostring</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>  
    <span class="k">elseif</span> <span class="n">t</span> <span class="o">==</span> <span class="s2">"string"</span> <span class="k">then</span>  
        <span class="n">str</span> <span class="o">=</span> <span class="n">str</span> <span class="o">..</span> <span class="nb">string.format</span><span class="p">(</span><span class="s2">"%q"</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>  
    <span class="k">elseif</span> <span class="n">t</span> <span class="o">==</span> <span class="s2">"table"</span> <span class="k">then</span>  
        <span class="n">str</span> <span class="o">=</span> <span class="n">str</span> <span class="o">..</span> <span class="s2">"{\n"</span>  
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="k">in</span> <span class="nb">pairs</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="k">do</span>  
            <span class="n">str</span> <span class="o">=</span> <span class="n">str</span> <span class="o">..</span> <span class="s2">"["</span> <span class="o">..</span> <span class="n">Serializer</span><span class="p">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">..</span> <span class="s2">"]="</span> <span class="o">..</span> <span class="n">Serializer</span><span class="p">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">..</span> <span class="s2">",\n"</span>  
        <span class="k">end</span>  
        <span class="kd">local</span> <span class="n">metatable</span> <span class="o">=</span> <span class="nb">getmetatable</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>  
        <span class="k">if</span> <span class="n">metatable</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">metatable</span><span class="p">.</span><span class="n">__index</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"table"</span> <span class="k">then</span>  
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="k">in</span> <span class="nb">pairs</span><span class="p">(</span><span class="n">metatable</span><span class="p">.</span><span class="n">__index</span><span class="p">)</span> <span class="k">do</span>  
                <span class="n">str</span> <span class="o">=</span> <span class="n">str</span> <span class="o">..</span> <span class="s2">"["</span> <span class="o">..</span> <span class="n">Serializer</span><span class="p">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">..</span> <span class="s2">"]="</span> <span class="o">..</span> <span class="n">Serializer</span><span class="p">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">..</span> <span class="s2">",\n"</span>  
            <span class="k">end</span>  
        <span class="k">end</span>  
        <span class="n">str</span> <span class="o">=</span> <span class="n">str</span> <span class="o">..</span> <span class="s2">"}"</span>  
    <span class="k">elseif</span> <span class="n">t</span> <span class="o">==</span> <span class="s2">"nil"</span> <span class="k">then</span>  
        <span class="k">return</span> <span class="kc">nil</span>  
    <span class="k">else</span>  
        <span class="nb">error</span><span class="p">(</span><span class="s2">"can not serialize a "</span> <span class="o">..</span> <span class="n">t</span> <span class="o">..</span> <span class="s2">" type."</span><span class="p">)</span>  
    <span class="k">end</span>  
    <span class="k">return</span> <span class="n">str</span>  
<span class="k">end</span>  

<span class="c1">--[Comment]</span>
<span class="c1">--将字符串反序列化成lua表</span>
<span class="c1">--str:  需要被反序列化的字符串</span>
<span class="c1">--返回: 被反序化的lua表</span>
<span class="n">Serializer</span><span class="p">.</span><span class="n">unserialize</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>  
    <span class="kd">local</span> <span class="n">t</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>  
    <span class="k">if</span> <span class="n">t</span> <span class="o">==</span> <span class="s2">"nil"</span> <span class="ow">or</span> <span class="n">str</span> <span class="o">==</span> <span class="s2">""</span> <span class="k">then</span>  
        <span class="k">return</span> <span class="kc">nil</span>  
    <span class="k">elseif</span> <span class="n">t</span> <span class="o">==</span> <span class="s2">"number"</span> <span class="ow">or</span> <span class="n">t</span> <span class="o">==</span> <span class="s2">"string"</span> <span class="ow">or</span> <span class="n">t</span> <span class="o">==</span> <span class="s2">"boolean"</span> <span class="k">then</span>  
        <span class="n">str</span> <span class="o">=</span> <span class="nb">tostring</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>  
    <span class="k">else</span>  
        <span class="nb">error</span><span class="p">(</span><span class="s2">"can not unserialize a "</span> <span class="o">..</span> <span class="n">t</span> <span class="o">..</span> <span class="s2">" type."</span><span class="p">)</span>  
    <span class="k">end</span>  
    <span class="n">str</span> <span class="o">=</span> <span class="s2">"return "</span> <span class="o">..</span> <span class="n">str</span>  
    <span class="kd">local</span> <span class="n">func</span> <span class="o">=</span> <span class="n">loadstring</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>  
    <span class="k">if</span> <span class="n">func</span> <span class="o">==</span> <span class="kc">nil</span> <span class="k">then</span> <span class="k">return</span> <span class="kc">nil</span> <span class="k">end</span>  
    <span class="k">return</span> <span class="n">func</span><span class="p">()</span>  
<span class="k">end</span>  

<span class="c1">--[Comment]</span>
<span class="c1">--将lua表序列化同时持久化到磁盘</span>
<span class="c1">--key:键用于索引存储的字符串</span>
<span class="c1">--obj:lua表</span>
<span class="c1">--返回为-1，表示操作失败，否则操作成功</span>
<span class="n">Serializer</span><span class="p">.</span><span class="n">save</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">ret</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="k">if</span> <span class="n">key</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"string"</span> <span class="ow">and</span> <span class="n">obj</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="k">then</span>
        <span class="kd">local</span> <span class="n">str</span> <span class="o">=</span> <span class="n">Serializer</span><span class="p">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">obj</span><span class="p">);</span>
        <span class="k">if</span> <span class="n">str</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="k">then</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="n">dict_set_string</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">str</span><span class="p">);</span>
            <span class="k">if</span> <span class="n">ret</span> <span class="o">~=</span> <span class="o">-</span><span class="mi">1</span> <span class="k">then</span>
                <span class="n">ret</span> <span class="o">=</span> <span class="n">dict_save</span><span class="p">(</span><span class="n">key</span><span class="p">);</span>
            <span class="k">end</span>
        <span class="k">end</span>
    <span class="k">end</span>
    <span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
<span class="k">end</span>

<span class="c1">--[Comment]</span>
<span class="c1">--从磁盘加载字符串，并反序列化成lua表</span>
<span class="c1">--key:键用于索引存储的字符串</span>
<span class="c1">--返回为nil，表示操作失败，否则操作成功</span>
<span class="n">Serializer</span><span class="p">.</span><span class="n">load</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">ret</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">;</span>
    <span class="k">if</span> <span class="n">key</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"string"</span>  <span class="k">then</span>
        <span class="n">dict_load</span><span class="p">(</span><span class="n">key</span><span class="p">);</span>
        <span class="kd">local</span> <span class="n">str</span> <span class="o">=</span> <span class="n">dict_get_string</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">key</span><span class="p">);</span>
        <span class="k">if</span> <span class="n">str</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="k">then</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="n">Serializer</span><span class="p">.</span><span class="n">unserialize</span><span class="p">(</span><span class="n">str</span><span class="p">);</span>
        <span class="k">end</span>
    <span class="k">end</span>
    <span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
<span class="k">end</span>

<span class="c1">--endregion</span>

</code></pre></div></div>

<p><strong>3.Android帧动画</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="n">imageView</span> <span class="o">=</span> <span class="o">(</span><span class="n">ImageView</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">imageView</span><span class="o">);</span>
	<span class="n">anim</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AnimationDrawable</span><span class="o">();</span>
	<span class="n">anim</span><span class="o">.</span><span class="na">addFrame</span><span class="o">(</span><span class="n">getResources</span><span class="o">().</span><span class="na">getDrawable</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">drawable</span><span class="o">.</span><span class="na">kof1</span><span class="o">),</span> <span class="mi">100</span><span class="o">);</span>
	<span class="n">anim</span><span class="o">.</span><span class="na">addFrame</span><span class="o">(</span><span class="n">getResources</span><span class="o">().</span><span class="na">getDrawable</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">drawable</span><span class="o">.</span><span class="na">kof2</span><span class="o">),</span> <span class="mi">100</span><span class="o">);</span>
	<span class="n">anim</span><span class="o">.</span><span class="na">addFrame</span><span class="o">(</span><span class="n">getResources</span><span class="o">().</span><span class="na">getDrawable</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">drawable</span><span class="o">.</span><span class="na">kof3</span><span class="o">),</span> <span class="mi">100</span><span class="o">);</span>
	<span class="n">anim</span><span class="o">.</span><span class="na">addFrame</span><span class="o">(</span><span class="n">getResources</span><span class="o">().</span><span class="na">getDrawable</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">drawable</span><span class="o">.</span><span class="na">kof4</span><span class="o">),</span> <span class="mi">100</span><span class="o">);</span>
	<span class="n">anim</span><span class="o">.</span><span class="na">addFrame</span><span class="o">(</span><span class="n">getResources</span><span class="o">().</span><span class="na">getDrawable</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">drawable</span><span class="o">.</span><span class="na">kof5</span><span class="o">),</span> <span class="mi">100</span><span class="o">);</span>
	<span class="n">anim</span><span class="o">.</span><span class="na">addFrame</span><span class="o">(</span><span class="n">getResources</span><span class="o">().</span><span class="na">getDrawable</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">drawable</span><span class="o">.</span><span class="na">kof6</span><span class="o">),</span> <span class="mi">100</span><span class="o">);</span>
	<span class="n">anim</span><span class="o">.</span><span class="na">setOneShot</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
	<span class="n">imageView</span><span class="o">.</span><span class="na">setBackgroundDrawable</span><span class="o">(</span><span class="n">anim</span><span class="o">);</span>
	<span class="n">imageView</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">new</span> <span class="n">View</span><span class="o">.</span><span class="na">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
		
		<span class="nd">@Override</span>
		<span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="n">View</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span>
			<span class="k">if</span><span class="o">(</span><span class="n">anim</span><span class="o">.</span><span class="na">isRunning</span><span class="o">()){</span>
				<span class="n">anim</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>
			<span class="o">}</span>
			<span class="k">else</span><span class="o">{</span>
				<span class="n">anim</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
			<span class="o">}</span>
		<span class="o">}</span>
	<span class="o">});</span>
</code></pre></div></div>

<p><strong>4.Android使用XML配置帧动画</strong></p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
	<span class="nt">&lt;animation-list</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span> <span class="nt">&gt;</span>
		<span class="nt">&lt;item</span> <span class="na">android:drawable=</span><span class="s">"@drawable/kof1"</span> <span class="na">android:duration=</span><span class="s">"1000"</span><span class="nt">/&gt;</span>
		<span class="nt">&lt;item</span> <span class="na">android:drawable=</span><span class="s">"@drawable/kof2"</span> <span class="na">android:duration=</span><span class="s">"1000"</span><span class="nt">/&gt;</span>
		<span class="nt">&lt;item</span> <span class="na">android:drawable=</span><span class="s">"@drawable/kof3"</span> <span class="na">android:duration=</span><span class="s">"1000"</span><span class="nt">/&gt;</span>
		<span class="nt">&lt;item</span> <span class="na">android:drawable=</span><span class="s">"@drawable/kof4"</span> <span class="na">android:duration=</span><span class="s">"1000"</span><span class="nt">/&gt;</span>
		<span class="nt">&lt;item</span> <span class="na">android:drawable=</span><span class="s">"@drawable/kof5"</span> <span class="na">android:duration=</span><span class="s">"1000"</span><span class="nt">/&gt;</span>
		<span class="nt">&lt;item</span> <span class="na">android:drawable=</span><span class="s">"@drawable/kof6"</span> <span class="na">android:duration=</span><span class="s">"1000"</span><span class="nt">/&gt;</span>
	<span class="nt">&lt;/animation-list&gt;</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="n">imageView</span> <span class="o">=</span> <span class="o">(</span><span class="n">ImageView</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">imageView</span><span class="o">);</span>
	<span class="n">imageView</span><span class="o">.</span><span class="na">setBackgroundResource</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">drawable</span><span class="o">.</span><span class="na">anim</span><span class="o">);</span>
	<span class="n">anim</span> <span class="o">=</span> <span class="o">(</span><span class="n">AnimationDrawable</span><span class="o">)</span> <span class="n">imageView</span><span class="o">.</span><span class="na">getBackground</span><span class="o">();</span>
	<span class="n">imageView</span><span class="o">.</span><span class="na">setBackgroundDrawable</span><span class="o">(</span><span class="n">anim</span><span class="o">);</span>
	<span class="n">imageView</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">new</span> <span class="n">View</span><span class="o">.</span><span class="na">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
		
		<span class="nd">@Override</span>
		<span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="n">View</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span>
			<span class="k">if</span><span class="o">(</span><span class="n">anim</span><span class="o">.</span><span class="na">isRunning</span><span class="o">()){</span>
				<span class="n">anim</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>
			<span class="o">}</span>
			<span class="k">else</span><span class="o">{</span>
				<span class="n">anim</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
			<span class="o">}</span>
		<span class="o">}</span>
	<span class="o">});</span>
</code></pre></div></div>

<p><strong>5.字符串分割</strong></p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">mysplit</span> <span class="o">=</span>  <span class="k">function</span><span class="p">(</span><span class="n">inputstr</span><span class="p">,</span> <span class="n">sep</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">sep</span> <span class="o">==</span> <span class="kc">nil</span> <span class="k">then</span>
        <span class="n">sep</span> <span class="o">=</span> <span class="s2">"%s"</span><span class="p">;</span>
    <span class="k">end</span>
    <span class="kd">local</span> <span class="n">t</span><span class="o">=</span><span class="p">{}</span> <span class="p">;</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
    <span class="k">for</span> <span class="n">str</span> <span class="k">in</span> <span class="nb">string.gmatch</span><span class="p">(</span><span class="n">inputstr</span><span class="p">,</span> <span class="s2">"([^"</span><span class="o">..</span><span class="n">sep</span><span class="o">..</span><span class="s2">"]+)"</span><span class="p">)</span> <span class="k">do</span>
        <span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">str</span><span class="p">;</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">end</span>
    <span class="k">return</span> <span class="n">t</span><span class="p">;</span>
<span class="k">end</span>
</code></pre></div></div>

                </section>

                <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a>
              </div>
            <div class="search-results">
              <div class="has-results">
                <h1 class="search-results-title"><span class="search-results-count"></span> results matching "<span class="search-query"></span>"</h1>
                <ul class="search-results-list"></ul>
              </div>
            <div class="no-results">
              <h1 class="search-results-title">No results matching "<span class="search-query"></span>"</h1>
            </div>
            </div>
            </div>
          </div>
        </div>
      </div>


      <!--<a href="rpi3.html" class="navigation navigation-next navigation-unique" aria-label="Next page: 2016 Raspberry Pi Model 3 B" style="margin-right: 0px;">
          <i class="fa fa-angle-right"></i>
      </a>
    </div> -->
</div>

    
  </body>
</html>
