<!DOCTYPE html>
<html lang="zh">
  <head>

  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>android基础知识 | KimWang's blog</title>
<meta name="description" content="KimWang's blog">

<meta itemprop="name" content="">
<meta itemprop="description" content="KimWang's blog">
<meta itemprop="image" content="">

<meta property="og:url" content="http://localhost:4000/android/2015/04/15/basic-width-android.html">
<meta property="og:type" content="website">
<meta property="og:title" content="android基础知识 | KimWang's blog">
<meta property="og:site_name" content="KimWang's blog">
<meta property="og:description" content="KimWang's blog">
<meta property="og:image" content="">

<meta name="twitter:url" content="http://localhost:4000/android/2015/04/15/basic-width-android.html">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="android基础知识 | KimWang's blog">
<meta name="twitter:site" content="KimWang's blog">
<meta name="twitter:description" content="KimWang's blog">

<meta property="twitter:image" content="">

<link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico">

<!--
<link rel="stylesheet" href="/assets/css/app.min.css">
<link rel="alternate" type="application/rss+xml" title="KimWang's blog" href="/feed.xml">
<link rel="canonical" href="/android/2015/04/15/basic-width-android.html">
-->

<link rel="stylesheet" href="/assets/dist/style.css">
<link rel="stylesheet" href="/assets/dist/highlight.css">
<link rel="stylesheet" href="/assets/dist/search.css">
<link rel="stylesheet" href="/assets/dist/fontsettings.css">
<link rel="stylesheet" href="/assets/dist/tool.css">




</head>

  <body>
    <div class="book without-animation with-summary font-size-2 font-family-1">
    <input type='checkbox' id='sidemenu' checked="true">
<aside>
<h3>KimWang's blog</h3>
<ul id="sideul">
    <li><a            href="http://localhost:4000/">主页</a></li>
    <li><a class="active" href="http://localhost:4000/posts.html">文章</a></li>
    <li><a  href="http://localhost:4000/tools.html">工具</a></li>
    <li><a href="#">关于</a></li>
</ul> 
</aside>   

<div class="book-summary">
  <div id="book-search-input" role="search">
    <input type="text" placeholder="search">
  </div>
  <nav role="navigation">
  <ul class="summary">
    
    
    <h2>&nbsp;&nbsp;android</h2>
    
      <li class="active"><a href="/android/2015/04/15/basic-width-android.html">&nbsp;&nbsp;&nbsp;&nbsp;1.android基础知识</a></li>
    
      <li ><a href="/android/2015/04/13/problem-width-android-orientation.html">&nbsp;&nbsp;&nbsp;&nbsp;2.android横竖屏切换时的一些问题</a></li>
    
  
    <li class="divider"></li>
    <h2>&nbsp;&nbsp;Common</h2>
    
      <li ><a href="/common/2015/04/30/linux_system_signal.html">&nbsp;&nbsp;&nbsp;&nbsp;1.Linux信号signal处理机制（转）</a></li>
    
      <li ><a href="/common/2015/04/29/timelinefx.html">&nbsp;&nbsp;&nbsp;&nbsp;2.Timelinefx粒子编辑器</a></li>
    
      <li ><a href="/common/2015/04/20/common-cmd.html">&nbsp;&nbsp;&nbsp;&nbsp;3.C/C++常用命令</a></li>
    
      <li ><a href="/common/2015/04/20/dll-and-so-compare.html">&nbsp;&nbsp;&nbsp;&nbsp;4.Window动态库与Linux共享对象比较（转）</a></li>
    
  
    <li class="divider"></li>
    <h2>&nbsp;&nbsp;Android</h2>
    
      <li ><a href="/android/2015/05/04/question-width-android.html">&nbsp;&nbsp;&nbsp;&nbsp;1.android开发问题集</a></li>
    
  
    <li class="divider"></li>
    <h2>&nbsp;&nbsp;AS3</h2>
    
      <li ><a href="/as3/2015/05/08/filereference.html">&nbsp;&nbsp;&nbsp;&nbsp;1.使用 FileReference 类（转）</a></li>
    
  
    <li class="divider"></li>
    <h2>&nbsp;&nbsp;common</h2>
    
      <li ><a href="/common/2015/06/05/opengl-glsurfaceview.html">&nbsp;&nbsp;&nbsp;&nbsp;1.GLSurfaceView相关（转）</a></li>
    
      <li ><a href="/common/2015/06/03/color-calculator.html">&nbsp;&nbsp;&nbsp;&nbsp;2.常用色彩模型转换算法</a></li>
    
      <li ><a href="/common/2015/05/26/fragment.html">&nbsp;&nbsp;&nbsp;&nbsp;3.常用代码片段</a></li>
    
  
  </ul>
</nav>
</div>

<div id='wrap'>
    <label id='sideMenuControl' for='sidemenu'>≡</label>
</div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <div style="display: none">TODO: share icons</div>
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i>
            <a>android基础知识</a>
          </h1>
        </div>
        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">
            <div id="book-search-results">
              <div class="search-noresults">
                <section class="normal markdown-section">
                  <p>###1.两种Java虚拟机的的比较<br />
1)编译后文件格式 <br />
jvm:    .java -&gt; .class-&gt; .jar<br />
dalvik: .java -&gt; .class -&gt; .dex -&gt; .odex</p>

<p>2)基于的架构<br />
jvm：	基于栈的架构<br />
dalvik: 基于寄存器的架构</p>

<p>3)文件结构<br />
Dalvik执行的是特有的DEX文件格式，而JVM运行的是*.class文件格式。优势：  <br />
1、在编译时提前优化代码而不是等到运行时<br />
2、虚拟机很小，使用的空间也小；被设计来满足可高效运行多种虚拟机实例。<br />
3、常量池已被修改为只使用32位的索引，以	简化解释器JVM的字节码主要是零地址形式的，概念上说JVM是基于栈的架构。Google Android平台上的应用程序的主要开发语言是Java，通过其中的Dalvik VM来运行Java程序。为了能正确实现语义，Dalvik VM的许多设计都考虑到与JVM的兼容性；但它却采用了基于寄存器的架构，其字节码主要是二地址/三地址的混合形式。</p>

<p>###2.获取android各种目录</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">context</span><span class="o">.</span><span class="na">getAssets</span><span class="o">();</span>	<span class="c1">//资产目录</span>
<span class="n">context</span><span class="o">.</span><span class="na">getFilesDir</span><span class="o">();</span>	<span class="c1">//数据目录</span>
<span class="n">context</span><span class="o">.</span><span class="na">getCacheDir</span><span class="o">();</span>	<span class="c1">//缓存目录</span>
<span class="n">context</span><span class="o">.</span><span class="na">getResource</span><span class="o">();</span>	<span class="c1">//资源目录</span>
</code></pre></div></div>

<p>###3.android访问文件权限 <br />
android下权限跟linux是对应的，一个android应用相当是一个用户，所以一个应用创建的文件就跟一个用户创建的文件后获得访问权限一致。</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">context</span><span class="o">.</span><span class="na">openFileOutput</span><span class="o">(</span><span class="s">"file"</span><span class="o">);</span>                                 <span class="c1">//默认   -rw-------</span>
<span class="n">context</span><span class="o">.</span><span class="na">openFileOutput</span><span class="o">(</span><span class="s">"file"</span><span class="o">,</span> <span class="n">Context</span><span class="o">.</span><span class="na">PRIVATE</span><span class="o">);</span>                <span class="c1">//私有   -rw-rw----</span>
<span class="n">context</span><span class="o">.</span><span class="na">openFileOutput</span><span class="o">(</span><span class="s">"file"</span><span class="o">,</span> <span class="n">Context</span><span class="o">.</span><span class="na">MODE_WORLD_READABLE</span><span class="o">);</span>    <span class="c1">//可读   -rw-rw-r--</span>
<span class="n">context</span><span class="o">.</span><span class="na">openFileOutput</span><span class="o">(</span><span class="s">"file"</span><span class="o">,</span> <span class="n">Context</span><span class="o">.</span><span class="na">MODE_WORLD_WRITEABLE</span><span class="o">);</span>   <span class="c1">//可写   -rw-rw--w-</span>
<span class="n">context</span><span class="o">.</span><span class="na">openFileOutput</span><span class="o">(</span><span class="s">"file"</span><span class="o">,</span> <span class="n">Context</span><span class="o">.</span><span class="na">MODE_WORLD_WRITEABLE</span> <span class="o">+</span>   <span class="c1">//可读写 -rw-rw-rw-</span>
<span class="n">Context</span><span class="o">.</span><span class="na">MODE_WORLD_READABLE</span><span class="o">);</span>
</code></pre></div></div>
<p>linux系统下的文件权限 <br />
位置0 -代表文件 d代表目录 
一般情况下android下的每一个应用都是一个独立的用户，对应一个独立的组<br />
位置1~3：当前用户				r可读 w可写 x可执行<br />
位置4~6：当前用户所在的组<br />
位置7~9：其他的用户的权限</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- --- --- --- 0 000
- rw- --- --- 0 600
- rw- rw- rw- 0 600
</code></pre></div></div>

<p>使用 <strong>chmod</strong> 可改变用户权限。</p>

<p>###4.介绍android在github上面相关开源项目</p>

<p>http://www.tuicool.com/articles/2yEBzqM</p>

<p>###5.获取android系统存储空间情况</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//获取ROM空间</span>
<span class="n">File</span> <span class="n">path</span> <span class="o">=</span> <span class="n">Environment</span><span class="o">.</span><span class="na">getDataStorageDirectory</span><span class="o">();</span>
<span class="n">StatFs</span> <span class="n">stat</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StatFs</span><span class="o">(</span><span class="n">path</span><span class="o">.</span><span class="na">getPath</span><span class="o">());</span>
<span class="kt">long</span> <span class="n">blockSize</span> <span class="o">=</span> <span class="n">stat</span><span class="o">.</span><span class="na">getBlockCount</span><span class="o">();</span>
<span class="kt">long</span> <span class="n">totalBlocks</span> <span class="o">=</span> <span class="n">stat</span><span class="o">.</span><span class="na">getBlockCount</span><span class="o">();</span>
<span class="kt">long</span> <span class="n">availableBlocks</span> <span class="o">=</span> <span class="n">stat</span><span class="o">.</span><span class="na">getAvailableBlocks</span><span class="o">();</span>

<span class="kt">long</span> <span class="n">totalSize</span> <span class="o">=</span> <span class="n">blockSize</span> <span class="o">*</span> <span class="n">totalBlocks</span><span class="o">;</span>
<span class="kt">long</span> <span class="n">availSize</span> <span class="o">=</span> <span class="n">availableBlocks</span> <span class="o">*</span> <span class="n">blocksSize</span><span class="o">;</span>

<span class="n">String</span> <span class="n">totalStr</span> <span class="o">=</span> <span class="n">Formatter</span><span class="o">.</span><span class="na">formatFileSize</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">totalSize</span><span class="o">);</span>
<span class="n">String</span> <span class="n">availStr</span> <span class="o">=</span> <span class="n">Formatter</span><span class="o">.</span><span class="na">formatFileSize</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">availSize</span><span class="o">);</span>

<span class="c1">//获取SD卡空间</span>
<span class="n">File</span> <span class="n">path</span> <span class="o">=</span> <span class="n">Environment</span><span class="o">.</span><span class="na">getExternalStorageDirectory</span><span class="o">();</span>
<span class="n">StatFs</span> <span class="n">stat</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StatFs</span><span class="o">(</span><span class="n">path</span><span class="o">.</span><span class="na">getPath</span><span class="o">());</span>
<span class="kt">long</span> <span class="n">blockSize</span> <span class="o">=</span> <span class="n">stat</span><span class="o">.</span><span class="na">getBlockCount</span><span class="o">();</span>
<span class="kt">long</span> <span class="n">totalBlocks</span> <span class="o">=</span> <span class="n">stat</span><span class="o">.</span><span class="na">getBlockCount</span><span class="o">();</span>
<span class="kt">long</span> <span class="n">availableBlocks</span> <span class="o">=</span> <span class="n">stat</span><span class="o">.</span><span class="na">getAvailableBlocks</span><span class="o">();</span>

<span class="kt">long</span> <span class="n">totalSize</span> <span class="o">=</span> <span class="n">blockSize</span> <span class="o">*</span> <span class="n">totalBlocks</span><span class="o">;</span>
<span class="kt">long</span> <span class="n">availSize</span> <span class="o">=</span> <span class="n">availableBlocks</span> <span class="o">*</span> <span class="n">blocksSize</span><span class="o">;</span>

<span class="n">String</span> <span class="n">totalStr</span> <span class="o">=</span> <span class="n">Formatter</span><span class="o">.</span><span class="na">formatFileSize</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">totalSize</span><span class="o">);</span>
<span class="n">String</span> <span class="n">availStr</span> <span class="o">=</span> <span class="n">Formatter</span><span class="o">.</span><span class="na">formatFileSize</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">availSize</span><span class="o">);</span>
</code></pre></div></div>

<p>###6.使用SharedPreferences保存设置信息</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//保存数据</span>
<span class="n">SharedPreferences</span> <span class="n">sp</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getSharedPrefernces</span><span class="o">(</span><span class="s">"config"</span><span class="o">,</span> <span class="n">Context</span><span class="o">.</span><span class="na">MODE_PRIVATE</span><span class="o">);</span>
<span class="n">Editor</span> <span class="n">editor</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="na">editor</span><span class="o">();</span>
<span class="n">editor</span><span class="o">.</span><span class="na">putString</span><span class="o">(</span><span class="s">"username"</span><span class="o">,</span> <span class="n">username</span><span class="o">);</span>
<span class="n">editor</span><span class="o">.</span><span class="na">putString</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="n">password</span><span class="o">);</span>
<span class="n">editor</span><span class="o">.</span><span class="na">commit</span><span class="o">();</span>

<span class="c1">//获取设置</span>
<span class="n">SharedPreferences</span> <span class="n">sp</span> <span class="o">=</span> <span class="n">getSharedPreferences</span><span class="o">(</span><span class="s">"config"</span><span class="o">,</span> <span class="n">Context</span><span class="o">.</span><span class="na">MODE_PRIVATE</span><span class="o">);</span>
<span class="n">sp</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"username"</span><span class="o">,</span> <span class="n">username</span><span class="o">);</span>
<span class="n">sp</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"password"</span><span class="o">,</span> <span class="n">password</span><span class="o">);</span>
</code></pre></div></div>

<p>###7.使用xml文件保存数据</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">XmlSerializer</span> <span class="n">serializer</span> <span class="o">=</span> <span class="n">Xml</span><span class="o">.</span><span class="na">newSerializer</span><span class="o">();</span>
<span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="n">wen</span> <span class="nf">File</span><span class="o">(</span><span class="n">Environment</span><span class="o">.</span><span class="na">getExternalStorageDirectory</span><span class="o">(),</span> <span class="s">"backup.xml"</span><span class="o">);</span>
<span class="n">FileOutputStream</span> <span class="n">os</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
<span class="c1">//初始化 序列号器制定xml数据写入到哪个文件，并且制定文件的编码方式</span>
<span class="n">serializer</span><span class="o">.</span><span class="na">setOutput</span><span class="o">(</span><span class="n">os</span><span class="o">,</span> <span class="s">"utf-8"</span><span class="o">);</span>
<span class="n">serializer</span><span class="o">.</span><span class="na">startDocument</span><span class="o">(</span><span class="s">"utf-8"</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
<span class="n">serializer</span><span class="o">.</span><span class="na">startTag</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="s">"root"</span><span class="o">);</span>
<span class="n">serializer</span><span class="o">.</span><span class="na">endTag</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="s">"root"</span><span class="o">);</span>
<span class="n">serializer</span><span class="o">.</span><span class="na">attribute</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="s">"id"</span><span class="o">,</span> <span class="n">value</span><span class="o">);</span>
<span class="n">serializer</span><span class="o">.</span><span class="na">startTag</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="s">"item"</span><span class="o">);</span>
<span class="n">serializer</span><span class="o">.</span><span class="na">startTag</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="s">"item"</span><span class="o">);</span>
<span class="n">serializer</span><span class="o">.</span><span class="na">endDocument</span><span class="o">();</span>
</code></pre></div></div>


                </section>

                <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a>
              </div>
            <div class="search-results">
              <div class="has-results">
                <h1 class="search-results-title"><span class="search-results-count"></span> results matching "<span class="search-query"></span>"</h1>
                <ul class="search-results-list"></ul>
              </div>
            <div class="no-results">
              <h1 class="search-results-title">No results matching "<span class="search-query"></span>"</h1>
            </div>
            </div>
            </div>
          </div>
        </div>
      </div>


      <!--<a href="rpi3.html" class="navigation navigation-next navigation-unique" aria-label="Next page: 2016 Raspberry Pi Model 3 B" style="margin-right: 0px;">
          <i class="fa fa-angle-right"></i>
      </a>
    </div> -->
</div>

    
  </body>
</html>
