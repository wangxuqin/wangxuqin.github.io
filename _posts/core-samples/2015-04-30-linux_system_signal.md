---
layout: post
title:  "Linux信号signal处理机制（转）"
date:   2015-04-30 16:00
categories: Common
---
转自:http://www.cnblogs.com/taobataoma/archive/2007/08/30/875743.html
信号是Linux编程中非常重要的部分，本文将详细介绍信号机制的基本概念、Linux对信号机制的大致实现方法、如何使用信号、以及有关信号的几个系统调用。

信号机制是进程之间相互传递消息的一种方法，信号全称为软中断信号，也有人称作软中断。从它的命名可以看出，它的实质和使用很项中断。所以，信号可以说是进程控制的一部分。
信号机制是进程之间相互传递消息的一种方法，信号全称为软中断信号，也有人称作软中断。从它的命名可以看出，它的实质和使用很项中断。所以，信号可以说是进程控制的一部分。

###一、信号的基本概念  
本节先介绍信号的一些基本概念，然后给出一些基本的信号类型和信号对应的事件。基本概念对于理解和使用信号，对于理解信号机制都特别重要。下面就来看看什么是信号。  
**1.基本概念**
软中断信号(signal，又简称为信号)用来同追进程发生了异步事件。进程之间可以相互通过系统调用kill发送软中断信号。内核也可以因为内部事件而给进程发送信号，通知进程发生了某个事件。**注意，信号只是用来通知某进程发生了什么事件，并不给该进程传递任何数据**。  

收到信号的进程对各种信号有不同的处理方法。处理方法可以分为三类：  
第一种是类似中断的处理程序，对于需要处理的信号，进程可以指定处理函数，由该函数来处理。  
第二种是对给信号的处理保留系统的默认值，这种缺省处理，就像未发生过一样。  
第三种是对该信号的处理保留系统的默认值，这种缺省操作，对大部分的信号的缺省操作是是的进程终止。进程通过系统调用signal来指定对某个信号的处理行为。  

在进程表的表项有一个软中断信号域，该域中每一位对应一个信号，当有信号发送给进程时，对应位置位。由此可以看出，进程对不同的信号可以同时保留，但对于同一个信号，进程并不知道在处理之前来过多少个。

**2.信号的类型**
发出信号的原因很多，这里按发出信号的原因简单分类，以了解各种信号：

```
<font color="#009900">  
(1)与进程终止相关的信号：当进程退出，或者子进程终止时，发出这类信号。

(2)与进程例外事件相关的信号：如进程越界、或企图写一个只读的内存区域（如程序正文区），或执行一个特权指令及其各种硬件错误。

(3)与在系统调用期间遇到不可恢复条件相关的信号：如执行系统调用exec时，原有资源已经释放，而目前系统资源又已经耗尽。

(4)与执行系统调用时遇到非预测错误条件相关的信号：如执行一个并不存在的系统调用。

(5)在用户态下的进程发出的信号：如进程调用系统调用kill向其他进程发送信号。

(6)与中断交互相关的信号：如用户关闭一个中断，或按下break键等情况。

(7)跟踪进程执行的信号。
</font>
```

Linux支持的信号列表如下。很多信号是与机器的体系结构相关的，首先列出的是POSIX.1中列出的信号：
信号 	值 		处理动作 		发出信号的原因：
SIGHUP 	1 			A 			终端挂起或者控制进程终止
SIGINT 	2 			A 			键盘中断
SIGQUIT 3 			C 			键盘退出键被按下
SIGILL 	4 			C 			非法指令
SIGABRT 6 			C 			由abort(3)发出的退出指令
SIGFPE	8			C			浮点异常
SIGKILL	9			AEF			Kill信号
SIGSEGV	11			C			无效的内存引用
SIGPIPE	13			A			管道破裂：写一个没有读端口的管道
SIGALRM 14			A			右alarm(2)发出的信号
SIGTERM	15			A			终止信号
SIGUSR1 30、10、16	A			用户自定义信号1
SIGUSR2 31、12、17	A			用户自定义信号2
SIGCHLD	20、17、18	B			子进程结束信号
SIGSTOP	17、19、23	DEF			终止进程
SIGTSTP	18、20、24	D			控制终端(tty)上按下终止键
SIGTTIN 21、21、26	D 			后台进程企图从控制终端读 
SIGTTOU 22、22、27	D 			后台进程企图从控制终端写 

上面介绍的信号是常见系统所支持的。以表达的形式介绍了各种信号的名称、作用及其在默认情况下的处理动作。各种默认处理动作的含义：

```
(1)终止程序是指进程退出;
(2)忽略该信号是将该信号丢弃，不做处理;
(3)停止程序是指程序挂起，进入停止状态以后还能重新进行下去;
```















